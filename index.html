<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forfeo - Accueil</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <style>
        /* --- CSS GLOBAL --- */
        html { scroll-behavior: smooth; }
        * { box-sizing: border-box; }
        body { margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #0a192f; color: #ccd6f6; line-height: 1.6; overflow-x: hidden; }

        /* BANDEAU */
        .top-banner { background: rgba(10, 25, 47, 0.95); backdrop-filter: blur(10px); color: #ccd6f6; text-align: center; padding: 12px; display: flex; justify-content: center; gap: 20px; border-bottom: 2px solid transparent; position: relative; z-index: 2000; }
        .top-banner::after { content: ''; position: absolute; bottom: 0; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, #0a192f, #64ffda, #00bcd4, #0a192f); background-size: 200% 100%; animation: borderFlow 4s linear infinite; }
        @keyframes borderFlow { 0% { background-position: 100% 0; } 100% { background-position: -100% 0; } }
        .btn-banner { color: #64ffda; border: 1px solid rgba(100, 255, 218, 0.3); padding: 5px 15px; border-radius: 20px; text-decoration: none; font-size: 0.85em; transition: all 0.3s; }
        .btn-banner:hover { background: rgba(100, 255, 218, 0.1); }

        /* HEADER */
        header { display: flex; justify-content: space-between; align-items: center; padding: 15px 50px; background-color: rgba(10, 25, 47, 0.95); position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid #1f2f4d; }
        .logo-img { height: 50px; }
        nav { display: flex; gap: 20px; align-items: center; }
        nav a { color: #a8b2d1; text-decoration: none; transition: color 0.3s; }
        nav a:hover { color: #64ffda; }
        .btn-connexion { border: 1px solid #64ffda; color: #64ffda !important; padding: 8px 20px; border-radius: 4px; }

        /* HERO & SECTIONS */
        .hero-section { padding: 100px 20px; text-align: center; }
        h1 { font-size: 3.5em; color: #e6f1ff; margin-bottom: 20px; }
        .highlight { background: linear-gradient(to right, #64ffda, #00bcd4); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .subtitle { font-size: 1.2em; color: #8892b0; max-width: 700px; margin: 0 auto 40px; }
        .boutons { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; }
        .btn { padding: 15px 30px; border-radius: 5px; text-decoration: none; font-weight: bold; }
        .btn-principal { background-color: #64ffda; color: #0a192f; }
        .btn-secondaire { border: 2px solid #64ffda; color: #64ffda; }
        
        /* CARTE & RECHERCHE */
        .map-section { padding: 40px 20px 80px; background-color: #0d1f3a; display: flex; flex-direction: column; align-items: center; }
        .search-container { width: 100%; max-width: 600px; margin-bottom: 25px; z-index: 10; }
        .map-search-bar { display: flex; background: rgba(10, 25, 47, 0.95); border: 1px solid #64ffda; border-radius: 50px; padding: 5px; box-shadow: 0 5px 25px rgba(100, 255, 218, 0.15); }
        .map-input { flex: 1; background: transparent; border: none; color: #fff; padding: 10px 20px; outline: none; }
        .map-btn { background: #64ffda; color: #0a192f; border: none; padding: 10px 30px; border-radius: 50px; cursor: pointer; font-weight: bold; }
        #map { height: 500px; width: 100%; max-width: 1000px; border-radius: 15px; border: 2px solid #64ffda; z-index: 1; }

        /* PINS CARTE */
        .custom-pin { background: linear-gradient(135deg, #64ffda, #00bcd4); width: 26px; height: 26px; border-radius: 50% 50% 50% 0; transform: rotate(-45deg); display: flex; justify-content: center; align-items: center; border: 2px solid #fff; margin-top: -15px; box-shadow: 2px 2px 5px rgba(0,0,0,0.5); }
        .custom-pin::after { content: ''; width: 10px; height: 10px; background-color: #0a192f; border-radius: 50%; }

        /* FOOTER */
        footer { text-align: center; padding: 40px; border-top: 1px solid #1f2f4d; color: #8892b0; }

        /* MOBILE */
        @media (max-width: 768px) {
            header { flex-direction: column; padding: 15px; }
            nav { flex-wrap: wrap; justify-content: center; width: 100%; }
            h1 { font-size: 2.2em; }
            .top-banner { flex-direction: column; }
        }
    </style>
</head>
<body>

    <div class="top-banner">
        <span>‚ú® Nouveau visage solidaire : <b>1 % pour le Qu√©bec !</b></span>
        <a href="apropos.html" class="btn-banner">En savoir plus ‚Üí</a>
    </div>

    <header>
        <a href="index.html"><img src="logo.png" alt="Logo Forfeo" class="logo-img"></a>
        <nav>
            <a href="apropos.html">√Ä Propos</a>
            <a href="causes.html">Causes</a>
            <a href="#concours">Concours</a>
            <a href="faq.html">Aide</a>
            <a href="partenaires.html">Espace Organismes</a>
            <a href="inscription.html">Participer</a>
            <a href="connexion.html" class="btn-connexion">Connexion</a>
        </nav>
    </header>

    <main>
        <section class="hero-section">
            <h1>Ensemble, pour un impact<br><span class="highlight">local durable</span></h1>
            <p class="subtitle">Chaque exp√©rience que vous vivez contribue directement √† soutenir les communaut√©s du Qu√©bec.</p>
            <div class="boutons">
                <a href="causes.html" class="btn btn-principal">D√©couvrir les causes</a>
                <a href="vote.html" class="btn btn-secondaire">Voter pour la cause</a>
            </div>
        </section>

        <section class="map-section">
            <h2 style="color:#e6f1ff; margin-bottom:20px;">Carte de l'Impact Social</h2>
            
            <div class="search-container">
                <div class="map-search-bar">
                    <input type="text" id="mapSearch" class="map-input" placeholder="Trouver un organisme (ex: Moisson)..." onkeypress="if(event.key==='Enter') searchMap()">
                    <button class="map-btn" onclick="searchMap()">Chercher</button>
                </div>
            </div>

            <div id="map"></div>
        </section>
    </main>
    
    <footer>
        <p>&copy; 2025 Forfeo. Fait avec passion au Qu√©bec.<br><a href="confidentialite.html" style="color: #64ffda;">Confidentialit√©</a></p>
    </footer>

    <script>
        var map = L.map('map').setView([46.8139, -71.2080], 6); 
        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', { attribution: '&copy; OpenStreetMap &copy; CARTO', subdomains: 'abcd', maxZoom: 19 }).addTo(map);

        var pinIcon = L.divIcon({ className: 'custom-pin-container', html: "<div class='custom-pin'></div>", iconSize: [30, 42], iconAnchor: [15, 42], popupAnchor: [0, -40] });

        // LISTE AVEC LIENS WEB (URL)
        var impactPoints = [
            { "nom": "Moisson Qu√©bec", "lat": 46.8139, "lon": -71.2080, "desc": "Banque alimentaire.", "url": "https://moissonquebec.com" },
            { "nom": "Dans la rue", "lat": 45.5186, "lon": -73.5540, "desc": "Aide jeunes sans-abri.", "url": "https://danslarue.org" },
            { "nom": "SPA de Qu√©bec", "lat": 46.8521, "lon": -71.3283, "desc": "Protection animale.", "url": "https://spadequebec.ca" },
            { "nom": "Moisson Montr√©al", "lat": 45.5017, "lon": -73.5673, "desc": "Banque alimentaire.", "url": "https://www.moissonmontreal.org" },
            { "nom": "SPA Estrie", "lat": 45.3833, "lon": -71.9333, "desc": "Refuge animalier.", "url": "https://spaestrie.qc.ca" },
            { "nom": "Centre Femmes Charlevoix", "lat": 47.6259, "lon": -70.3622, "desc": "Soutien femmes.", "url": "https://centrefemmescharlevoix.com" },
            { "nom": "Moisson Saguenay", "lat": 48.4284, "lon": -71.0601, "desc": "Aide alimentaire.", "url": "https://moissonsaguenay.com" },
            { "nom": "Moisson Rimouski", "lat": 48.4398, "lon": -68.5234, "desc": "Aide alimentaire.", "url": "https://moissonrimouski.org" },
            // Ajoute d'autres organismes ici avec leur URL...
        ];

        impactPoints.forEach(point => {
            // Cr√©ation du lien dynamique dans le popup
            let popupContent = `<b style="color:#0a192f; font-size:1.1em;">${point.nom}</b><br>${point.desc}`;
            if(point.url) {
                popupContent += `<br><a href="${point.url}" target="_blank" style="display:inline-block; margin-top:8px; color:#ffffff; background:#64ffda; padding:5px 10px; border-radius:4px; text-decoration:none; font-weight:bold; font-size:0.9em; color:#0a192f;">üåê Visiter le site</a>`;
            }
            L.marker([point.lat, point.lon], { icon: pinIcon }).addTo(map).bindPopup(popupContent);
        });

        function searchMap() {
            var input = document.getElementById('mapSearch').value.toLowerCase();
            if(!input) return;
            var found = impactPoints.find(p => p.nom.toLowerCase().includes(input));
            if(found) {
                map.flyTo([found.lat, found.lon], 13, { duration: 2 });
                setTimeout(() => {
                    // Recr√©er le popup pour l'ouvrir
                    let content = `<b style="color:#0a192f">${found.nom}</b><br>${found.desc}`;
                    if(found.url) content += `<br><a href="${found.url}" target="_blank" style="display:inline-block; margin-top:8px; background:#64ffda; padding:5px 10px; border-radius:4px; text-decoration:none; font-weight:bold; color:#0a192f;">üåê Visiter le site</a>`;
                    L.popup().setLatLng([found.lat, found.lon]).setContent(content).openOn(map);
                }, 2000);
            } else { alert("Organisme non trouv√©. Essayez 'Moisson' ou 'SPA'."); }
        }
    </script>

    <script src="forfy.js"></script>

</body>
</html>
